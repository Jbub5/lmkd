{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d5a12c4f_4c1035a0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1741425
      },
      "writtenOn": "2021-09-01T15:26:36Z",
      "side": 1,
      "message": "I\u0027d argue that this CL is not necessary at all. When the server pushes new flags to the device, the device already boots, so boot_completed is always 1. The logic reinit\u003d${boot_completed:-0} never has a chance to set reinit to 0.",
      "revId": "0e64eadc213a9f15ee9d6714830021a674998c06",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8830ac8c_97f185f0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1741425
      },
      "writtenOn": "2021-09-01T15:29:44Z",
      "side": 1,
      "message": "Well, I think I misunderstood the purpose of this CL. It\u0027s not for the moment the flags are pushed to the device, but for the reboot following that. Then it looks good to me.",
      "revId": "0e64eadc213a9f15ee9d6714830021a674998c06",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2a7cb17e_87338d36",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1157738
      },
      "writtenOn": "2021-09-01T15:46:07Z",
      "side": 1,
      "message": "Correct. This is to prevent multiple reinits when persistent properties are being loaded at boot time. So we postpone reinit until the boot is done and if any relevant property got changed then lmk.reinit will be 0 and we will execute lmkd reinit only one time.",
      "parentUuid": "8830ac8c_97f185f0",
      "revId": "0e64eadc213a9f15ee9d6714830021a674998c06",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "19dd2c73_287cb82c",
        "filename": "lmkd.rc",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1105075
      },
      "writtenOn": "2021-09-01T16:31:37Z",
      "side": 1,
      "message": "do we have a chance experiments will change those persist property before boot_complete?\n\nif not, we can save the reinit even it is just once so that we can just do\n\non property:sys.boot_completed\u003d1 \u0026\u0026 property:persist.device_config.lmkd_native.debug\u003d*\n    setprop lmkd.reinit 1",
      "range": {
        "startLine": 13,
        "startChar": 0,
        "endLine": 15,
        "endChar": 25
      },
      "revId": "0e64eadc213a9f15ee9d6714830021a674998c06",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a25997e7_ed047ac6",
        "filename": "lmkd.rc",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1105075
      },
      "writtenOn": "2021-09-01T16:31:37Z",
      "side": 1,
      "message": "do we have a chance experiments will change those persist property before boot_complete?\n\nif not, we can save the reinit (even it is just once, as lmkd will try to load from psrsist if it exists) so that we can just do\n\non property:sys.boot_completed\u003d1 \u0026\u0026 property:persist.device_config.lmkd_native.debug\u003d*\n    setprop lmkd.reinit 1",
      "range": {
        "startLine": 13,
        "startChar": 0,
        "endLine": 15,
        "endChar": 25
      },
      "revId": "0e64eadc213a9f15ee9d6714830021a674998c06",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}