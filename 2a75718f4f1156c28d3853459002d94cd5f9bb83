{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "4ef317b6_67577285",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1017430
      },
      "writtenOn": "2023-06-08T21:03:34Z",
      "side": 1,
      "message": "doesn\u0027t this make lmkd less aggressive in favor of spending more time in kswapd?",
      "revId": "2a75718f4f1156c28d3853459002d94cd5f9bb83",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c5898550_1e1b9fe3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1157738
      },
      "writtenOn": "2023-06-08T21:08:24Z",
      "side": 1,
      "message": "Yes but this way the calculation does not underestimate the amount of data swap can accomodate before it runs out of space. Current calculation assumes data to be always uncompressible (worst case scenario) which leads to LMKD being overly aggressive (see the bug in the description).",
      "parentUuid": "4ef317b6_67577285",
      "revId": "2a75718f4f1156c28d3853459002d94cd5f9bb83",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "38f37053_e84cb35f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1017430
      },
      "writtenOn": "2023-06-08T21:14:39Z",
      "side": 1,
      "message": "We already have strong evidence that lmkd is too conservative about killing during bursty allocations. I don\u0027t think we should be changing this without a clear idea of the precise impact.",
      "parentUuid": "c5898550_1e1b9fe3",
      "revId": "2a75718f4f1156c28d3853459002d94cd5f9bb83",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6c987aa7_ab832254",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1157738
      },
      "writtenOn": "2023-06-08T21:28:19Z",
      "side": 1,
      "message": "Partner reports that this calculation makes lmkd overly aggressive for their device. Should I make the compression ratio configurable with 1x as a default and let partners reset it when required?",
      "parentUuid": "38f37053_e84cb35f",
      "revId": "2a75718f4f1156c28d3853459002d94cd5f9bb83",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "abda9325_fcb4eda7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1275554
      },
      "writtenOn": "2023-06-08T21:46:24Z",
      "side": 1,
      "message": "The patch fixes the free swap calculation correctly, which is a worthwhile improvement by itself. However, it would also introduce less aggressive LMKD kill behavior compared to the previous version.\n\nIs it possible to adjust the other LMKD aggressiveness knobs to bring the new behavior on par with the old behavior, or even more aggressive? And then vendor could adjust these knobs themselves, then.",
      "parentUuid": "6c987aa7_ab832254",
      "revId": "2a75718f4f1156c28d3853459002d94cd5f9bb83",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "db90171c_bd3e35aa",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1157738
      },
      "writtenOn": "2023-06-08T22:10:57Z",
      "side": 1,
      "message": "Unfortunately adjusting other knobs will have additional side-effects. For example if we instead adjust the low_swap limit to compensate for this 1x compression ration then we will be less aggressive when FreeSwap drops lower than the current low_swap limit. I think a separate knob would be the right way to solve this if we indeed don\u0027t want to change current lmkd behavior and to solve partner\u0027s issue.",
      "parentUuid": "abda9325_fcb4eda7",
      "revId": "2a75718f4f1156c28d3853459002d94cd5f9bb83",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d2b0ba3f_c35a704e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1275554
      },
      "writtenOn": "2023-06-08T22:20:09Z",
      "side": 1,
      "message": "The LMKD behavior used to be fine, but it has become more conservative as the platform has become smarter about memory management. I think it\u0027s time to retune the behavior along with platform changes. I am fine to change the behavior if the direction goes more aggressive. If some vendor concerns it since they use on their own policy, they could adjust LMKD knobs on their side.",
      "parentUuid": "db90171c_bd3e35aa",
      "revId": "2a75718f4f1156c28d3853459002d94cd5f9bb83",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8754906f_9d94fbae",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1157738
      },
      "writtenOn": "2023-06-08T22:31:12Z",
      "side": 1,
      "message": "The issue is that there is no such knob today to tune the compression ratio in this calculation. Therefore partners can\u0027t tune this on their side.",
      "parentUuid": "d2b0ba3f_c35a704e",
      "revId": "2a75718f4f1156c28d3853459002d94cd5f9bb83",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}