{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ebae32e0_c86073bf",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 1157738
      },
      "writtenOn": "2022-10-21T01:21:42Z",
      "side": 1,
      "message": "You need to add this line here:\n\n`Bug: 254410109`",
      "revId": "5ebecfaab5f9f7295e081bf223cd78498478f7b1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ac75e974_ae2a34b8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 1961582
      },
      "writtenOn": "2022-10-21T02:15:19Z",
      "side": 1,
      "message": "Done,Thanks for your guidance!",
      "parentUuid": "ebae32e0_c86073bf",
      "revId": "5ebecfaab5f9f7295e081bf223cd78498478f7b1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "77c0e03d_2300d8ed",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 1961582
      },
      "writtenOn": "2022-10-24T09:22:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ac75e974_ae2a34b8",
      "revId": "5ebecfaab5f9f7295e081bf223cd78498478f7b1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e5c4019f_55ae115a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1157738
      },
      "writtenOn": "2022-10-18T00:38:45Z",
      "side": 1,
      "message": "Please file a bug, link it to this patch using Bug: tag and describe the issue there. From this description it\u0027s unclear to me what is the issue and how this patch fixes it.",
      "revId": "5ebecfaab5f9f7295e081bf223cd78498478f7b1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "70b26e3b_728707c3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1961582
      },
      "writtenOn": "2022-10-19T12:06:02Z",
      "side": 1,
      "message": "Hi!\n\nI have file a bug in : https://partnerissuetracker.corp.google.com/issues/254410109\nPlease help to analysic.\n\nThanks!",
      "parentUuid": "e5c4019f_55ae115a",
      "revId": "5ebecfaab5f9f7295e081bf223cd78498478f7b1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "980e2dfc_e61570c5",
        "filename": "lmkd.cpp",
        "patchSetId": 5
      },
      "lineNbr": 2366,
      "author": {
        "id": 1157738
      },
      "writtenOn": "2022-10-21T01:21:10Z",
      "side": 1,
      "message": "Hmm. Are you saying that `procp-\u003eoomadj` changes between here and when we call `killinfo_log` at line 2396? That I think can\u0027t happen because reaper does not modify `procp-\u003eoomadj`. The only place it can be modified is in `cmd_procprio` which runs in the same main thread as `kill_one_process`, therefore can\u0027t race with this code.\n\nPlease clarify the scenario that you are experiencing. From this change it\u0027s still unclear why you would get a wrong procp-\u003eoomadj at the time of `killinfo_log` call.",
      "range": {
        "startLine": 2366,
        "startChar": 4,
        "endLine": 2366,
        "endChar": 27
      },
      "revId": "5ebecfaab5f9f7295e081bf223cd78498478f7b1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "362b8a5e_4822741e",
        "filename": "lmkd.cpp",
        "patchSetId": 5
      },
      "lineNbr": 2366,
      "author": {
        "id": 1961582
      },
      "writtenOn": "2022-10-21T02:15:19Z",
      "side": 1,
      "message": "As i know that, procp is a pointer to process maintained in procadjslot_list.killinfo also get log information from this.\n\nMay be have a situation like that: \nthis kill is a sync kill, being kill process\u0027s pid is giving to reaper thread, then block there until reaper work done. During this time, lmkd main thread receive an adj update from AMS, and save new adj to procadjslot_list?  So that killinfo log get a after change adj?\n\nScenario i meat in memory pressure test which swtich app very frequently, i think adj update also frequently. This scenario likely have high probability to happen this situation?\n\nLooking forward to your continued guidance.\nThanks a lot!",
      "parentUuid": "980e2dfc_e61570c5",
      "range": {
        "startLine": 2366,
        "startChar": 4,
        "endLine": 2366,
        "endChar": 27
      },
      "revId": "5ebecfaab5f9f7295e081bf223cd78498478f7b1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "19ece968_bc6c224f",
        "filename": "lmkd.cpp",
        "patchSetId": 5
      },
      "lineNbr": 2366,
      "author": {
        "id": 1157738
      },
      "writtenOn": "2022-10-21T23:43:21Z",
      "side": 1,
      "message": "re: `During this time, lmkd main thread receive an adj update from AMS, and save new adj to procadjslot_list? So that killinfo log get a after change adj?`\n\nNo this would not be possible. The main thread is the only one that processes messages from AMS. So, even if it is blocked waiting for reaper threads (which it should not), there is no possibility of AMS updating the record because it has to be done by the same main thread which is blocked.",
      "parentUuid": "362b8a5e_4822741e",
      "range": {
        "startLine": 2366,
        "startChar": 4,
        "endLine": 2366,
        "endChar": 27
      },
      "revId": "5ebecfaab5f9f7295e081bf223cd78498478f7b1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e89dafde_0f9caa08",
        "filename": "lmkd.cpp",
        "patchSetId": 5
      },
      "lineNbr": 2366,
      "author": {
        "id": 1961582
      },
      "writtenOn": "2022-10-24T09:22:14Z",
      "side": 1,
      "message": "All right, but it actually happen in test case.\nMay you have some method to debug for it? or something idea for this sicuation?\nThanks a lot!",
      "parentUuid": "362b8a5e_4822741e",
      "range": {
        "startLine": 2366,
        "startChar": 4,
        "endLine": 2366,
        "endChar": 27
      },
      "revId": "5ebecfaab5f9f7295e081bf223cd78498478f7b1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d938beff_fcfa0b30",
        "filename": "lmkd.cpp",
        "patchSetId": 5
      },
      "lineNbr": 2366,
      "author": {
        "id": 1157738
      },
      "writtenOn": "2022-10-25T21:08:20Z",
      "side": 1,
      "message": "Have you tried logging procp-\u003eoomadj here and comparing it with the procp-\u003eoomadj in killinfo_log() report? I don\u0027t see any path that would modify procp-\u003eoomadj in between these locations unless procp somehow gets overritten completely. Please verify that the values indeed differ.",
      "parentUuid": "e89dafde_0f9caa08",
      "range": {
        "startLine": 2366,
        "startChar": 4,
        "endLine": 2366,
        "endChar": 27
      },
      "revId": "5ebecfaab5f9f7295e081bf223cd78498478f7b1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}